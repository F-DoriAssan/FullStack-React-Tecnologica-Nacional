{"ast":null,"code":"import _toConsumableArray from \"/home/doriass/P\\xFAblico/UTNBA-React/trabajopractico03-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/doriass/P\\xFAblico/UTNBA-React/trabajopractico03-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/doriass/P\\xFAblico/UTNBA-React/trabajopractico03-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/doriass/P\\xFAblico/UTNBA-React/trabajopractico03-react/src/context.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { storeProducts, detailProduct } from \"./data\";\nvar ProductContext = React.createContext();\n\nfunction ProductProvider(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState(detailProduct),\n      _useState4 = _slicedToArray(_useState3, 2),\n      detailProducts = _useState4[0],\n      setDetailProducts = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      cart = _useState6[0],\n      setCart = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cartSubTotal = _useState8[0],\n      setCartSubTotal = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cartTax = _useState10[0],\n      setCartTax = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      cartTotal = _useState12[0],\n      setCartTotal = _useState12[1];\n\n  useEffect(function () {\n    setPdt();\n  }, []);\n  useEffect(function () {\n    addTotals();\n    if (cart.length === 0) setPdt(); // eslint-deshabilitar-siguiente-línea\n  }, [cart]);\n\n  var getItem = function getItem(id) {\n    var product = products.find(function (item) {\n      return item.id === id;\n    });\n    return product;\n  };\n\n  var setPdt = function setPdt() {\n    var tempPdt = [];\n    storeProducts.forEach(function (item) {\n      var singleItem = _objectSpread({}, item);\n\n      tempPdt = [].concat(_toConsumableArray(tempPdt), [singleItem]);\n    });\n    setProducts(tempPdt);\n  };\n\n  var handleDetail = function handleDetail(id) {\n    var product = getItem(id);\n    setDetailProducts(product);\n  };\n\n  var addToCart = function addToCart(id) {\n    var tempPdts = _toConsumableArray(products);\n\n    var index = tempPdts.indexOf(getItem(id)); //const product=getItem(id);\n\n    var product = tempPdts[index];\n    product.inCart = true;\n    product.count = 1;\n    var price = product.price;\n    product.total = price;\n    setProducts(tempPdts);\n    setCart([].concat(_toConsumableArray(cart), [product])); //addTotals()\n  };\n\n  var increment = function increment(id) {\n    // const product=getItem(id);\n    // product.count=product.count+1;\n    // addTotals()\n    var tmpCart = _toConsumableArray(cart);\n\n    var selPdt = tmpCart.find(function (item) {\n      return item.id === id;\n    });\n    var index = tmpCart.indexOf(selPdt);\n    var product = tmpCart[index];\n    product.count = product.count + 1;\n    product.total = product.count * product.price;\n    setCart(_toConsumableArray(tmpCart));\n  };\n\n  var decrement = function decrement(id) {\n    var tmpCart = _toConsumableArray(cart);\n\n    var selPdt = tmpCart.find(function (item) {\n      return item.id === id;\n    });\n    var index = tmpCart.indexOf(selPdt);\n    var product = tmpCart[index];\n    product.count = product.count - 1;\n    if (product.count === 0) removeItem(id);else {\n      product.total = product.count * product.price;\n      setCart(_toConsumableArray(tmpCart));\n    }\n  };\n\n  var removeItem = function removeItem(id) {\n    var tmpPdts = _toConsumableArray(products);\n\n    var tmpCart = _toConsumableArray(cart);\n\n    tmpCart = tmpCart.filter(function (item) {\n      return item.id !== id;\n    });\n    var index = tmpPdts.indexOf(getItem(id));\n    var removedPdt = tmpPdts[index];\n    removedPdt.inCart = false;\n    removedPdt.count = 0;\n    removedPdt.total = 0;\n    setCart(_toConsumableArray(tmpCart));\n    setProducts(_toConsumableArray(tmpPdts));\n  };\n\n  var clearCart = function clearCart(id) {\n    setCart([]);\n  };\n\n  var addTotals = function addTotals() {\n    var subTot = 0;\n    cart.map(function (item) {\n      return subTot += item.total;\n    });\n    var tempTax = subTot * 0.1;\n    var tax = parseFloat(tempTax.toFixed(2));\n    var total = subTot + tax;\n    setCartSubTotal(subTot);\n    setCartTax(tax);\n    setCartTotal(total);\n  };\n\n  return React.createElement(ProductContext.Provider, {\n    value: {\n      products: products,\n      detailProducts: detailProducts,\n      cart: cart,\n      cartSubTotal: cartSubTotal,\n      cartTotal: cartTotal,\n      cartTax: cartTax,\n      handleDetail: handleDetail,\n      addToCart: addToCart,\n      increment: increment,\n      decrement: decrement,\n      removeItem: removeItem,\n      clearCart: clearCart\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, props.children);\n}\n\nvar ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer };","map":{"version":3,"sources":["/home/doriass/Público/UTNBA-React/trabajopractico03-react/src/context.js"],"names":["React","useState","useEffect","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","props","products","setProducts","detailProducts","setDetailProducts","cart","setCart","cartSubTotal","setCartSubTotal","cartTax","setCartTax","cartTotal","setCartTotal","setPdt","addTotals","length","getItem","id","product","find","item","tempPdt","forEach","singleItem","handleDetail","addToCart","tempPdts","index","indexOf","inCart","count","price","total","increment","tmpCart","selPdt","decrement","removeItem","tmpPdts","filter","removedPdt","clearCart","subTot","map","tempTax","tax","parseFloat","toFixed","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { storeProducts, detailProduct } from \"./data\";\n\nconst ProductContext = React.createContext();\n\nfunction ProductProvider(props) {\n  const [products, setProducts] = useState([]);\n  const [detailProducts, setDetailProducts] = useState(detailProduct);\n  const [cart, setCart] = useState([]);\n  const [cartSubTotal, setCartSubTotal] = useState(0);\n  const [cartTax, setCartTax] = useState(0);\n  const [cartTotal, setCartTotal] = useState(0);\n\n  useEffect(() => {\n    setPdt();\n  }, []);\n\n  useEffect(() => {\n    addTotals();\n    if (cart.length === 0) setPdt();\n    // eslint-deshabilitar-siguiente-línea\n  }, [cart]);\n\n  const getItem = (id) => {\n    const product = products.find((item) => item.id === id);\n    return product;\n  };\n\n  const setPdt = () => {\n    let tempPdt = [];\n    storeProducts.forEach((item) => {\n      const singleItem = { ...item };\n      tempPdt = [...tempPdt, singleItem];\n    });\n    setProducts(tempPdt);\n  };\n  const handleDetail = (id) => {\n    const product = getItem(id);\n    setDetailProducts(product);\n  };\n  const addToCart = (id) => {\n    let tempPdts = [...products];\n    const index = tempPdts.indexOf(getItem(id));\n    //const product=getItem(id);\n    const product = tempPdts[index];\n    product.inCart = true;\n    product.count = 1;\n    const price = product.price;\n    product.total = price;\n    setProducts(tempPdts);\n    setCart([...cart, product]);\n    //addTotals()\n  };\n\n  const increment = (id) => {\n    // const product=getItem(id);\n    // product.count=product.count+1;\n    // addTotals()\n    let tmpCart = [...cart];\n    const selPdt = tmpCart.find((item) => item.id === id);\n    const index = tmpCart.indexOf(selPdt);\n    const product = tmpCart[index];\n    product.count = product.count + 1;\n    product.total = product.count * product.price;\n    setCart([...tmpCart]);\n  };\n\n  const decrement = (id) => {\n    let tmpCart = [...cart];\n    const selPdt = tmpCart.find((item) => item.id === id);\n    const index = tmpCart.indexOf(selPdt);\n    const product = tmpCart[index];\n    product.count = product.count - 1;\n    if (product.count === 0) removeItem(id);\n    else {\n      product.total = product.count * product.price;\n      setCart([...tmpCart]);\n    }\n  };\n\n  const removeItem = (id) => {\n    let tmpPdts = [...products];\n    let tmpCart = [...cart];\n    tmpCart = tmpCart.filter((item) => item.id !== id);\n    const index = tmpPdts.indexOf(getItem(id));\n    let removedPdt = tmpPdts[index];\n    removedPdt.inCart = false;\n    removedPdt.count = 0;\n    removedPdt.total = 0;\n    setCart([...tmpCart]);\n    setProducts([...tmpPdts]);\n  };\n\n  const clearCart = (id) => {\n    setCart([]);\n  };\n\n  const addTotals = () => {\n    let subTot = 0;\n    cart.map((item) => (subTot += item.total));\n    const tempTax = subTot * 0.1;\n    const tax = parseFloat(tempTax.toFixed(2));\n    const total = subTot + tax;\n    setCartSubTotal(subTot);\n    setCartTax(tax);\n    setCartTotal(total);\n  };\n\n  return (\n    <ProductContext.Provider\n      value={{\n        products,\n        detailProducts,\n        cart,\n        cartSubTotal,\n        cartTotal,\n        cartTax,\n        handleDetail,\n        addToCart,\n        increment,\n        decrement,\n        removeItem,\n        clearCart,\n      }}\n    >\n      {props.children}\n    </ProductContext.Provider>\n  );\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer };\n"]},"metadata":{},"sourceType":"module"}